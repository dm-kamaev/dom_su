<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css">
    <style>
        .ui-input-text.ui-custom {
           border: none;
           box-shadow: none;
        }
    </style>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="/static/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="/static/js/custom_cookie.js?v=1.0"></script>
    <!-- Google Tag Manager -->
{{#if general.production}}

  <noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-PHD7WW" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PHD7WW');</script>

{{/if}}
    <!-- End Google Tag Manager -->
</head>
<body class="">
    <div data-role="page" class="jqm-demos ui-responsive-panel" id="main-page" data-title="Личный кабинет от Домовёнка">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1 style="overflow: visible">Профиль</h1>
            <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
        </div>
        <div role="main" class="ui-content jqm-content jqm-fullwidth">
        <script>$(document).unbind('scroll');</script>
            <h3>{{ GetEmployeeData.FullTitle }}</h3>
            <h3>{{ GetEmployeeData.Post }}</h3>
            <h3><a href="tel:{{ GetEmployeeData.PhoneNumber }}">{{ GetEmployeeData.PhoneNumber }}</a></h3>
            {{#if itIsMe }}
                <span>Лимит на средства и материалы: <span style="font-weight: bold">{{GetEmployeeData.MatLimit}}</span> руб.</span><br/>
                <a data-ajax="false" href="{{staffUrl 'employeeDetail' selfId }}">Заказы</a>
            {{/if}}
            <div data-demo-html="#panel-responsive-page1"></div>
            <div style=margin-top:20px; data-demo-html="#panel-responsive-page3">
                <div>
                    <a href="{{staffUrl 'creditsCurrent' selfId }}">Заработано</a> {{earned_money}} руб.
                </div>
                <div style=margin-top:10px>
                    <a href="{{staffUrl 'depositCurrent' selfId }}">Необходимо сдать</a> {{deposit_money}} руб.
                </div>
            </div>
            <div style=margin-top:20px; data-demo-html="#panel-responsive-page2">{{{total_receivable}}}</div>

            <div style=margin-top:30px;text-align:center>
                <button id=copy_link_in_buffer style=width:100% type=button>Скопировать ссылку</button>
                <input
                    id=text_for_buffer
                    data-wrapper-class=ui-custom {{!-- add custom class for wrap. Turn off border  --}}
                    style=display:none;
                    value='Работа в стабильной компании. Зарплата до 50 тыс. рублей.
                    Клининговая компания Домовенок ищет сотрудников на полную занятость. Еженедельные выплаты. Корпоративная SIM-карта. Бесплатное обучение.
                    {{link_to_landing_with_utm}}'
                />
            </div>
        </div>
            <div data-role="panel" data-display="overlay" data-theme="b" id="nav-panel">
                <ul data-role="listview">
                    <li data-icon="delete"><a href="#" data-rel="close">Закрыть Меню</a></li>
                        <li><a href="{{staffUrl 'employeeDetail' selfId }}?profile=true" class="ui-btn ui-btn-active">Профиль</a></li>
                        <li><a href="{{staffUrl 'creditsCurrent' selfId }}">Заработано</a></li>
                        <li><a href="{{staffUrl 'depositCurrent' selfId }}">Необходимо сдать</a></li>
                        <li><a href="{{staffUrl 'employeeDetail' selfId }}?orders=true">Заказы</a></li>
                        <li><a data-ajax="false" href="{{staffUrl 'rating' selfId }}">Рейтинг</a></li>
                        <li><a href="{{staffUrl 'disciplinaryList' selfId }}">Нарушения</a></li>
                        <li><a href="{{staffUrl 'conversationList' selfId }}">Обращения</a></li>
                        <li><a href="{{staffUrl 'news' selfId}}">Новости</a></li>
                        <li><a data-ajax="false" onclick="mobile_view(false)" href="">Полная версия</a></li>
                        <li><a data-ajax="false" href="{{staffUrl 'logout' }}">Выйти</a></li>
                </ul>
            </div>
    </div>
    <script>
        var $copy_link_in_buffer = $('#copy_link_in_buffer')
        $copy_link_in_buffer.click(function(){
          copy_link_in_clipboard('text_for_buffer');
          $copy_link_in_buffer.css({ opacity: 0.5 });
          $copy_link_in_buffer.prop('disabled', true);
        });

        function copy_link_in_clipboard(id) {
          var copyText = document.getElementById(id);
          copyText.style.display = 'block';
          copyText.select();
          document.execCommand("Copy");
          copyText.style.display = 'none';
        }

        // cross-browser
        // to_copy -- dom-object
        // function copy_link_in_clipboard(to_copy) {
        //     if (document.createRange) {
        //         // IE9 and modern browsers
        //         var r = document.createRange();
        //         r.setStartBefore(to_copy);
        //         r.setEndAfter(to_copy);
        //         r.selectNode(to_copy);
        //         var sel = window.getSelection();
        //         sel.addRange(r);
        //         document.execCommand('Copy');  // does nothing on FF
        //     } else {
        //         // IE 8 and earlier.  This stuff won't work on IE9.
        //         // (unless forced into a backward compatibility mode,
        //         // or selecting plain divs, not img or table).
        //         var r = document.body.createTextRange();
        //         r.moveToElementText(to_copy);
        //         r.select()
        //         r.execCommand('Copy');
        //     }
        // }
    </script>
</body>
</html>